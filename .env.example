# Copy this file to .env and adjust values for your environment

# Server
APP_HOST=0.0.0.0
APP_PORT=8080
BASE_URL=http://localhost:8080

# Database Configuration
# Superuser password (for migrations and admin tasks only)
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD
# Application user password (used by the app)
BLINKY_DB_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD
DATABASE_URL=postgres://blinky:CHANGE_ME_GENERATE_STRONG_PASSWORD@localhost:5432/blinky
# Database connection pool size (default: 20)
# Increase for high-concurrency workloads
DB_POOL_SIZE=20

# Redis - Cache (evictable, for URL lookups)
# REDIS_CACHE_URL=redis://redis-cache:6379
CACHE_TTL_SECS=3600

# Redis - Queue (durable, for click events)
# REDIS_QUEUE_URL=redis://redis-queue:6379
QUEUE_MAX_RETRIES=3
QUEUE_STREAM_KEY=clicks:stream
QUEUE_DLQ_STREAM_KEY=clicks:stream:dlq
QUEUE_CONSUMER_GROUP=click-processors
QUEUE_WORKER_ID=worker-1
QUEUE_BATCH_SIZE=100
QUEUE_POLL_INTERVAL_MS=1000
QUEUE_BLOCK_TIMEOUT_MS=1000
QUEUE_MIN_IDLE_TIME_MS=60000

# Shortcode Generation
# Maximum retry attempts when generating unique shortcodes (default: 5)
SHORTCODE_MAX_RETRIES=5

# CORS Configuration
# Set to false if using a reverse proxy (nginx, caddy) for CORS
CORS_ENABLED=false
# If enabled, specify allowed origins (comma-separated):
# CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Logging
LOG_FORMAT=json
RUST_LOG=info,sqlx=warn,axum::rejection=warn
